<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
	<meta name="description" content="responsive clothing store template">
	<meta name="author" content="afriq yasin ramadhan">
	<link href="img/favicon.png" rel="shortcut icon" />
	<title>ProudOfMyColors</title>
	<!-- Bootstrap core CSS -->
	<link href="/css/bootstrap.css" rel="stylesheet" />
	<!-- Custom styles for this template -->
	<link href="/css/style.css" rel="stylesheet" />
	<link href="/css/responsive.css" rel="stylesheet" />
	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
      <script src="/js/respond.min.js"></script>
    <![endif]-->
		<!--Favicon  -->
		<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	<!--Favicon  -->
</head>

<body>
	<!-- begin:navbar -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#clotheshop-navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse" id="clotheshop-navbar">
				<ul class="nav navbar-nav navbar-right" id="menu_items">
				</ul>
			</div><!-- /.navbar-collapse -->
		</div>
	</nav>
	<!-- end:navbar -->
	<!-- begin:content -->

	<div class="container">
		<!-- begin:logo -->
		<div class="row">
			<div class="col-md-6 col-sm-6 col-xs-6">
				<div class="logo">
					<img src="/img/logos/Proud-O-My-Colours_TEXTONLY-02-02.png" class="img-responsive" alt="Proud Of My Colors">
				</div>
			</div>
			<div class="col-md-6 col-sm-6 col-xs-6">
				<div class="account">
					<ul>
						<li id="your-account">
						</li>
						<li id="cart-status">
						</li>
					</ul>
				</div>
			</div>
			<!-- button to empty the cart -->
			<!-- show the cart -->
			<!--End #cartPopover-->
		</div>
		<!-- end:logo -->
		<!-- begin:nav-menus -->

		<div class="row">
			<div class="col-md-12">
				<div class="nav-menus">
				</div>
			</div>
		</div>


		<div class="row">
			<dov class="col-md-12">
				<h1>Products</h1>
				<div class="message"></div>
				<button type="button" id="btnCreateNewProduct" class="btn btn-link select">Create Product</button>
				<table class="table table-striped" id="productTable">
					<thead>
						<tr>
							<th>Code</th>
							<th>Name</th>
							<th>Country</th>
							<th>Gender</th>
							<th>Price</th>
							<th></th>
						</tr>
					</thead>
					<tbody></tbody>
				</table>


				<!-- Modal -->
				<div id="productModal" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<!-- Modal content-->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">Manage Product</h4>
							</div>
							<div class="modal-body">
								<div class="message"></div>

								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label class="control-label col-sm-4" for="id">Product Code:</label>
										<div class="col-sm-8">
											<input type="number" class="form-control" id="id" readonly>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="productName">Product Name:</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" id="productName" readonly>
										</div>
									</div>
									<div class="form-group">
										<label class="control-label col-sm-4" for="description">Description:</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" id="description" readonly>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="country">Country:</label>
										<div class="col-sm-8">
											<select class="form-control" id="country">
												<option value="US">USA</option>
												<option value="JM">Jamaica</option>
											</select>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="smallImageName">Small Image Path:</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" id="smallImageName" readonly>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="largeImageName">large Image Path:</label>
										<div class="col-sm-8">
											<input type="text" class="form-control" id="largeImageName" readonly>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="availability">Availability:</label>
										<div class="col-sm-8">
											<select class="form-control" id="availability">
												<option value="0">Out of Stock</option>
												<option value="1">In Stock</option>
											</select>
										</div>
									</div>

									<div class="form-group">
										<label class="control-label col-sm-4" for="gender">Gender:</label>
										<div class="col-sm-8">
											<select class="form-control" id="gender">
												<option value="male">Male</option>
												<option value="female">Female</option>
											</select>
										</div>
									</div>


									<div class="form-group">
										<label class="control-label col-sm-4" for="price">Price:</label>
										<div class="col-sm-8">
											<input type="number" class="form-control" id="price" readonly>
										</div>
									</div>

								</form>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								<button type="button" class="btn btn-primary" id="update-product">Update</button>
								<button type="button" class="btn btn-primary" id="create-product">Create</button>
								<button type="button" class="btn btn-primary" id="delete-product">Delete</button>
							</div>
						</div>

					</div>
				</div>
			</dov>
		</div>


		<!-- end:new-arrival -->

		<!-- begin:footer -->

		<!-- end:footer -->
		<!-- begin:copyright -->

		<div class="row footer">
			<div class="col-md-12 copyright">
				<div class="row">
					<div class="col-md-6 col-sm-6 copyright-left">
						<p>Copyright &copy; Proud Of My Colors 2016. All right reserved.</p>
					</div>
					<div class="col-md-6 col-sm-6 copyright-right">
						<ul class="list-unstyled list-social">
							<li><a href="#"><i class="fa fa-twitter"></i></a></li>
							<li><a href="https://www.facebook.com/proudofmycolors"><i class="fa fa-facebook-square"></i></a></li>

							<li><a href="#"><i class="fa fa-instagram"></i></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- end:copyright -->
	</div>
	<!-- end:content -->
	<div class="loadingModal">
		<!-- Place at bottom of page -->
	</div>
	<!-- Le javascript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="/js/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/masonry.pkgd.min.js"></script>
	<script src="/js/imagesloaded.pkgd.min.js"></script>
	<script src="/js/script.js"></script>
	<script src="/js/bootbox.js"></script>
	<!--aws-->
	<script src="/js/aws/jsbn.js"></script>
	<script src="/js/aws/jsbn2.js"></script>
	<script src="/js/aws/sjcl.js"></script>
	<script src="/js/aws/moment.min.js"></script>
	<script src="/js/aws/aws-cognito-sdk.min.js"></script>
	<script src="/js/aws/amazon-cognito-identity.min.js"></script>
	<script src="/js/aws/aws-sdk-2.3.19.min.js"></script>
	<!--Iron Rock Custom Library-->
	<script src="/js/courserv_web_services.js"></script>
	<script src="/js/index.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
			initPage(function(err, obj) {
				populateCountries();
				listProducts(obj);
			});

			function populateCountries() {
					var $select = $('#country').empty();
					for (var i = 0; i < g_valid_countries.length; i++) {
							var $option = $("<option/>").val(g_valid_countries[i].code).text(g_valid_countries[i].name);
							$select.append($option);
					}
			}

			$('#update-product').click(function() {
				var product_data = {};
				product_data.productId = $('#id').val();
				product_data.productName = $('#productName').val();
				product_data.smallImageName = $('#smallImageName').val();
				product_data.largeImageName = $('#largeImageName').val();
				product_data.description = $('#description').val();
				product_data.category1 = $('#gender').val();
				product_data.availability = $('#availability').val();
				product_data.category0 = $('#country').val();
				product_data.price = $('#price').val();
				setLoadingState(true);
				g_courserv_web_service.updateProduct(g_domainKey, product_data, function(err, data) {
					setLoadingState(false);
					listProducts();
					$('#productModal').modal('hide');
				});
			});

			$('#delete-product').click(function() {
				var id = $('#id').val();
				bootbox.confirm("Are you sure?", function(ans) {
					if (ans) {
						setLoadingState(true);
						g_courserv_web_service.deleteProduct(g_domainKey, id, function(err, data) {
							setLoadingState(false);
							listProducts();
							$('#productModal').modal('hide');
						});
					}
				});
			});


			$('#productTable tbody').on('click', '.select', function(e) {
				var id = e.target.id;
				setLoadingState(true);
				g_courserv_web_service.getProduct(g_domainKey, id, function(err, item) {
					setLoadingState(false);
					$('#id').val(item.productId).prop("readonly", true);
					$('#productName').val(item.productName).prop("readonly", false);
					$('#description').val(item.description).prop("readonly", false);
					$('#smallImageName').val(item.smallImageName).prop("readonly", false);
					$('#largeImageName').val(item.largeImageName).prop("readonly", false);
					$('#country').val(item.category0).prop("readonly", false);
					$('#gender').val(item.category1).prop("readonly", false);
					$('#price').val(item.price).prop("readonly", false);
					$('#update-product').show();
					$('#delete-product').show();
					$('#create-product').hide();
					$('#productModal .modal-title').text('Update Product');
					$('#productModal').modal('show');
				});
			});


			$('#btnCreateNewProduct').click(function() {
				$('#id').val('').prop("readonly", false);
				$('#productName').val('').prop("readonly", false);
				$('#description').val('').prop("readonly", false);
				$('#smallImageName').val('').prop("readonly", false);
				$('#largeImageName').val('').prop("readonly", false);
				$('#price').val('').prop("readonly", false);
				$('#update-product').hide();
				$('#delete-product').hide();
				$('#create-product').show();
				$('#productModal .modal-title').text('Create Product');
				$('#productModal').modal('show');
			});


			//create new product
			$("#create-product").click(function(e) {
				var product_data = {};
				product_data.productId = $('#id').val();
				product_data.productName = $('#productName').val();
				product_data.smallImageName = $('#smallImageName').val();
				product_data.largeImageName = $('#largeImageName').val();
				product_data.description = $('#description').val();
				product_data.category1 = $('#gender').val();
				product_data.availability = $('#availability').val();
				product_data.category0 = $('#country').val();
				product_data.price = $('#price').val();
				setLoadingState(true);
				g_courserv_web_service.createProduct(g_domainKey, product_data, function(err, data) {
					setLoadingState(false);
					listProducts();
					$('#productModal').modal('hide');
				});
			});


			function listProducts(obj) {
				obj = obj ? obj : g_courserv_web_service; //
				obj.listProducts(g_domainKey, function(err, items) {
					if (err) {
						display(err.message, err);
						return;
					}
					var tcontent = $('#productTable tbody').empty();
					$.each(items, function(idx, val) {
						tcontent.append('<tr><td>' + val.productId +
							'</td><td>' + val.productName +
							'</td><td>' + val.category0 +
							'</td><td>' + val.category1 +
							'</td><td>' + val.price +
							'</td><td><button type="button" id="' + val.productId +
							'" class="btn btn-link select">Select</button></td></tr>');
					});
				});
			}








		});
	</script>
</body>

</html>
