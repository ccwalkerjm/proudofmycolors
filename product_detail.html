<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="description" content="range of shopping including tee shirts and other items">
    <meta name="author" content="courserv">
    <link rel="shortcut icon" href="img/favicon.png">

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


    <title>ProudOfMyColors</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.js"></script>
      <script src="js/respond.min.js"></script>
    <![endif]-->
    <!--Favicon  -->
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!--Favicon  -->
</head>

<body>

    <!-- begin:navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#clotheshop-navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div class="collapse navbar-collapse" id="clotheshop-navbar">
                <ul class="nav navbar-nav navbar-right" id="menu_items">
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
    </nav>
    <!-- end:navbar -->

    <!-- begin:content -->
    <div class="container">
        <!-- begin:logo -->
        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="logo">
                    <img src="/img/logos/Proud-O-My-Colours_TEXTONLY-02-02_small.png" class="img-responsive" alt="Proud Of My Colors">
                </div>
            </div>
            <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="account">
                    <ul>
                        <li id="your-account">
                        </li>
                        <li id="cart-status">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- end:logo -->

        <!-- begin:nav-menus -->
        <div class="row">
            <div class="col-md-12">
                <div class="nav-menus">
                </div>
            </div>
        </div>
        <!-- end:nav-menus -->

        <!-- begin:article -->
        <div class="row">
            <!-- begin:sidebar -->
            <div class="col-md-3 col-sm-4 sidebar">
                <div class="row">
                    <div class="col-md-12">
                        <div class="widget" id="shoppingCartWidget">
                        </div>
                        <!-- break -->
                        <div class="widget" id="shoppingCartCheckout">
                        </div>
                    </div>
                </div>
            </div>
            <!-- end:sidebar -->

            <!-- begin:content -->
            <div class="col-md-9 col-sm-8 content vertical-line">
                <div class="row" id="productRowId">
                    <div class="col-md-12">
                        <div class="heading-title">
                            <input type="hidden" id="productId" value="">
                            <h3><span class="item_name" id="productName">Trinidad and Tobago Disc Flag Tshirt</span></h3>
                        </div>
                        <div class="row">
                            <!-- begin:product-image-slider -->
                            <div class="col-md-6 col-sm-6">
                                <img id="productImg">
                            </div>
                            <!-- end:product-image-slider -->

                            <!-- begin:product-spesification -->
                            <div class="col-md-6 col-sm-6">
                                <div class="single-desc">
                                    <form>
                                        <table id="productDetails">
                                            <tbody>

                                                <tr class="hidden-xs">
                                                    <td><strong>Availability</strong></td>
                                                    <td>:</td>
                                                    <td id="availability">In Stock</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3"> <span class="price item_price"></span></td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Size</strong></td>
                                                    <td>:</td>
                                                    <td>
                                                        <select class="form-control item_size">
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Quantity</strong></td>
                                                    <td>:</td>
                                                    <td>
                                                        <input type="number" class="form-control item_Quantity" value="1">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3">
                                                        <a href="/order.html" class="btn btn-default">Continue Shopping</a>
                                                        <button type="button" class="btn btn-sm btn-primary item_add pull-right">Add to Cart</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- end:product-spesification -->
                    </div>
                    <!-- break -->
                    <!-- begin:product-detail -->
                    <div class="row">
                        <div class="col-md-6 content-detail">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Details</h3>
                                </div>
                                <div class="panel-body" id="productDescription">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end:product-detail -->

                    <!-- begin:related-product -->
                    <div class="row">
                        <div class="col-md-12">
                            <div class="heading-title">
                                <h3>Related Products</h3>
                            </div>

                            <div class="row product-container" style="position: relative; height: 463.75px;">
                                <div class="col-md-4 col-sm-4 col-xs-6">
                                    <div class="thumbnail product-item" id="firstItem">
                                        <img class="item_thumb" />
                                        <span class="item_name"></span>
                                        <span class="item_price"></span>
                                        <br>
                                        <button type="button" class="btn btn-default productBtn" aria-label="Left Align">
                                            <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6">
                                    <div class="thumbnail product-item" id="secondItem">
                                        <img class="item_thumb" />
                                        <span class="item_name"></span>
                                        <span class="item_price"></span>
                                        <br>
                                        <button type="button" class="btn btn-default productBtn" aria-label="Left Align">
                                            <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-6">
                                    <div class="thumbnail product-item" id="thirdItem">
                                        <img class="item_thumb" />
                                        <span class="item_name"></span>
                                        <span class="item_price"></span>
                                        <br>
                                        <button type="button" class="btn btn-default productBtn" aria-label="Left Align">
                                            <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- end:related-product -->

                </div>
            </div>
            <!-- end:content -->
        </div>
        <!-- end:article -->
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <!-- begin:footer -->
        <div class="row footer">
            <div class="col-md-12 copyright">
                <div class="row">
                    <div class="col-md-6 col-sm-6 copyright-left">
                        <p>Copyright &copy; Proud Of My Colors 2016. All right reserved.</p>
                    </div>
                    <div class="col-md-6 col-sm-6 copyright-right">
                        <ul class="list-unstyled list-social">
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="https://www.facebook.com/proudofmycolors"><i class="fa fa-facebook-square"></i></a></li>

                            <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- end:copyright -->

    </div>
    <!-- end:content -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/masonry.pkgd.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/script.js"></script>

    <script src="/js/accounting.js"></script>
    <!--aws-->
    <script src="/js/aws/jsbn.js"></script>
    <script src="/js/aws/jsbn2.js"></script>
    <script src="/js/aws/sjcl.js"></script>
    <script src="/js/aws/moment.min.js"></script>
    <script src="/js/aws/aws-cognito-sdk.min.js"></script>
    <script src="/js/aws/amazon-cognito-identity.min.js"></script>
    <script src="/js/aws/aws-sdk-2.3.19.min.js"></script>
    <!--Iron Rock Custom Library-->
    <script src="/js/proudofmycolorsservice.js"></script>
    <script src="/js/index.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var productId;
            initPage(function(err, obj) {
                productId = getQueryStringParams("id");
                listProducts(obj);
            });

            //add to Cart
            $('.item_add').click(function() {
                var productRow = $(this).closest("#productRowId");
                var productItem = JSON.parse($("#productId").val());
                productItem.quantity = productRow.find(".item_Quantity").val();
                productItem.size = productRow.find(".item_size").val();
                addToCart(productItem);
                //alert(productItem.data('product_id'));
            });


            function listProducts(obj) {
                obj = obj ? obj : g_proudOfMyColorsService; //
                obj.listProducts(function(err, items) {
                    if (err) {
                        display(err.message, err);
                        return;
                    }

                    if (!productId)
                        productId = items[0].id;

                    var productItem;
                    for (var i = 0; i < items.length; i++) {
                        if (productId == items[i].id) {
                            productItem = items[i];
                            break;
                        }
                    }

                    if (!productItem)
                        productItem = items[getRandomizedItems(1, items.length)[0]];


                    $('#productId').val(JSON.stringify(productItem));
                    $('#productDescription').html('<p>' + productItem.description + '</p>');
                    $('#productName').text(productItem.productName);
                    $('#productImg').attr("src", productItem.largeImageName);
                    $('#productDetails').find('.item_price').text(accounting.formatMoney(productItem.price));

                    var sizes = $('#productDetails').find('.item_size').empty();
                    sizes.append('<option value="S">S</option>');
                    sizes.append('<option value="M">M</option>');
                    sizes.append('<option value="L">L</option>');
                    sizes.append('<option value="XL">XL</option>');
                    if (productItem.gender == "male") {
                        sizes.append('<option value="XXL">XXL</option>');
                    }

                    if (productItem.availability == 0) {
                        $('#availability').text("Out of Stock");
                    } else {
                        $('#availability').text("In Stock");
                    }


                    //related by gender and country
                    var relatedItems = []
                    for (var i = 0; i < items.length; i++) {
                        if (productItem.country == items[i].country && productItem.gender == items[i].gender) {
                            relatedItems.push(items[i]);
                        }
                    }


                    //display
                    var exceptItems = [];
                    exceptItems.push(productItem);

                    var randomizedItems = getRandomizedItems(relatedItems.length >= 3 ? 3 : relatedItems.length, relatedItems.length, exceptItems);

                    if (relatedItems.length >= 1) diplayItem($("#firstItem"), relatedItems[randomizedItems[0]]);
                    if (relatedItems.length >= 2) diplayItem($("#secondItem"), relatedItems[randomizedItems[1]]);
                    if (relatedItems.length >= 3) diplayItem($("#thirdItem"), relatedItems[randomizedItems[2]]);
                });
            }


            function diplayItem(element, item) {
                element.data("product_id", item.id);
                element.find(".item_name").text(item.productName);
                element.find(".item_thumb").attr("src", item.smallImageName);
                element.find(".item_price").text(accounting.formatMoney(item.price));
            }


        });
    </script>

</body>

</html>
